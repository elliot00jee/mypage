<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CheatSheet for CKS :: mypage</title>
    <link rel="canonical" href="https://elliot00jee.github.io/mypage/codingstory/latest/cks/cheat-sheet-for-cks.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-extra.css">
    <link rel="icon" href="../../../favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://elliot00jee.github.io/mypage">mypage</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="codingstory" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">CodingStory</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">ğŸ‘‹ Hi, Stranger</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Documentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Antora</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../documentation/get-started.html">Antoraë¡œ í˜ì´ì§€ ìƒì„±í•˜ê¸°</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../documentation/publish-to-github-pages.html">Github Pageì— ë°œí–‰í•˜ê¸°</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">ì•Œê³ ë¦¬ì¦˜</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">ìœ ë‹ˆì˜¨ íŒŒì¸ë“œ</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../algorithms/p20040.html">ì‚¬ì´í´ ê²Œì„</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../algorithms/p9372.html">ìƒê·¼ì´ì˜ ì—¬í–‰</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬</span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">ê·¸ë¦¬ë””</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../algorithms/p12979.html">ê¸°ì§€êµ­ ì„¤ì¹˜</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">CKA</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cka/cheat-sheet-for-cka.html">CheatSheet for CKA</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">CKS</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="cheat-sheet-for-cks.html">CheatSheet for CKS</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">CodingStory</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../index.html">CodingStory</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../learningstory/latest/index.html">learningstory</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../learningstory/latest/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../TIL/latest/index.html">TIL</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../TIL/latest/index.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">CodingStory</a></li>
    <li>CKS</li>
    <li><a href="cheat-sheet-for-cks.html">CheatSheet for CKS</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/elliot00jee/mypage/edit/main/codingstory/docs/modules/cks/pages/cheat-sheet-for-cks.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">CheatSheet for CKS</h1>
<div class="ulist">
<ul>
<li>
<p>kubelet authorization/authentication</p>
<div class="ulist">
<ul>
<li>
<p><a href="#https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/">Kubelet</a>, <a href="#https://kubernetes.io/docs/reference/access-authn-authz/kubelet-authn-authz/">Kubelet authentication/authorization</a></p>
</li>
<li>
<p><code>--anonymous-auth=false</code>: ìµëª… ì ‘ê·¼ ë¹„í™œì„±í™”</p>
</li>
<li>
<p><code>--authorization-moth=</code> <code>AlwaysAllow</code> or <code>Webhook</code>: <code>Webhook</code> ì˜ ê²½ìš°, API ì„œë²„ í˜¸ì¶œí•˜ì—¬ ì¸ê°€ëœ ìš”ì²­ì¸ì§€ í™•ì¸</p>
</li>
<li>
<p><code>--read-only-port=10255</code>: ì½ê¸° ì „ìš© í¬íŠ¸ í™œì„±í™”, <code>0</code> ì˜ ê²½ìš°, ë¹„í™œì„±í™”</p>
</li>
<li>
<p><code>--port=10250</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>kube proxy &amp; port forwarding</p>
<div class="ulist">
<ul>
<li>
<p><code>kubectl proxy</code>: ê¸°ë³¸ í¬íŠ¸ 8001</p>
</li>
<li>
<p><code>kubectl port-forward [svc/&lt;service-name&gt; | pod/&lt;pod-name&gt; | deploy/&lt;deploy-name&gt;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>binary ìœ íš¨ì„± ê²€ì¦</p>
<div class="ulist">
<ul>
<li>
<p><code>shasum -a &lt;algorithm:512&gt; *.tar</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>SSH hardening</p>
<div class="ulist">
<ul>
<li>
<p><code>/etc/ssh/sshd_config</code>: ssh ê´€ë ¨ ì˜µì…˜</p>
<div class="ulist">
<ul>
<li>
<p><code>PermitRootLogin: no</code>: root ê³„ì •ìœ¼ë¡œ ssh ì—°ê²° ë¹„í™œì„±í™”</p>
</li>
<li>
<p><code>PasswordAuthentication: no</code>: private í‚¤ ë¡œê·¸ì¸ë§Œ í—ˆìš©</p>
</li>
</ul>
</div>
</li>
<li>
<p>ì‚¬ìš©ì ì¶”ê°€/ìˆ˜ì •</p>
<div class="ulist">
<ul>
<li>
<p><code>adduser &lt;user-name&gt;</code>: ì‚¬ìš©ì ì¶”ê°€</p>
</li>
<li>
<p><code>usermod &lt;user-name&gt; -G &lt;group-name&gt;</code>: ì‚¬ìš©ìë¥¼ ê·¸ë£¹ì— ì¶”ê°€</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ssh-copy-id &lt;user-name&gt;@&lt;hostname&gt;</code>: ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ë¡œê·¸ì¸í•˜ë„ë¡ ì„¤ì •(password-less)</p>
</li>
<li>
<p><code>/etc/sudoers</code>: sudo ëª…ë ¹ ê°€ëŠ¥í•œ ì‚¬ìš©ì ê´€ë¦¬</p>
<div class="ulist">
<ul>
<li>
<p><code>mark ALL=(ALL:ALL) ALL</code>: mark ì‚¬ìš©ìì— ëª¨ë“  ê¶Œí•œ ë¶€ì—¬</p>
</li>
<li>
<p><code>jim ALL=(ALL)NOPASSWD: ALL</code>: ë¹„ë°€ë²ˆí˜¸ ì—†ì´ sudo ì‚¬ìš© ê°€ëŠ¥</p>
</li>
<li>
<p><code>sarah ALL=/usr/bin/shutdown -r now</code>: í•´ë‹¹ ì»¤ë§¨ë“œë§Œ sudoë¡œ ì‹¤í–‰ ê°€ëŠ¥</p>
</li>
<li>
<p><code>%admin</code>: admin ê·¸ë£¹</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>í•„ìš”í•˜ì§€ ì•Šì€ íŒ¨í‚¤ì§€ ê´€ë¦¬ - systemctl, apt</p>
<div class="ulist">
<ul>
<li>
<p>í•„ìš”í•˜ì§€ ì•Šì€ ì„œë¹„ìŠ¤ ë° íŒ¨í‚¤ì§€ ì‚­ì œ</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>systemctl list-units --type=service</code>: enable ìƒíƒœì¸ ì„œë¹„ìŠ¤ ëª©ë¡</p>
</li>
<li>
<p><code>systemctl stop/disable &lt;package-name&gt;</code></p>
</li>
<li>
<p><code>rm /lib/systemd/system/&lt;service-name&gt;.service</code>: unit file ì‚­ì œ</p>
</li>
<li>
<p><code>apt remove &lt;package-name&gt;</code>: íŒ¨í‚¤ì§€ ì‚­ì œ</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>apt list --installed</code>: ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡</p>
</li>
<li>
<p><code>apt update &amp; apt install &lt;package-name&gt;</code>: íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë˜ëŠ” ì—…ê·¸ë ˆì´ë“œ</p>
</li>
<li>
<p><code>netstat -anp | grep -w LISTEN</code>: ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ ëª©ë¡</p>
</li>
</ul>
</div>
</li>
<li>
<p>ì»¤ë„ ëª¨ë“ˆ ê´€ë¦¬ - modprobe</p>
<div class="ulist">
<ul>
<li>
<p><code>lsmod</code>: í˜„ì¬ ì‹œìŠ¤í…œì— ë¡œë“œëœ ì»¤ë„ ëª¨ë“ˆ ëª©ë¡</p>
</li>
<li>
<p><code>/etc/modprobe.d/blacklist.conf</code>: í•´ë‹¹ ëª¨ë“ˆ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬</p>
</li>
</ul>
</div>
</li>
<li>
<p>ë°©í™”ë²½ ê´€ë¦¬ - UFW</p>
<div class="ulist">
<ul>
<li>
<p>UFW ì„¤ì¹˜</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>apt update</code></p>
</li>
<li>
<p><code>apt-get install ufw</code></p>
</li>
<li>
<p><code>systemctl enable ufw</code></p>
</li>
<li>
<p><code>systemctl start ufw</code></p>
</li>
</ol>
</div>
</li>
<li>
<p><code>ufw status (numbered)</code>: ufw ìƒíƒœ ë° ë£° ì¡°íšŒ</p>
</li>
<li>
<p><code>ufw reset</code>: ufw ë£° ì´ˆê¸°í™”</p>
</li>
<li>
<p><code>ufw disable</code>: ufw ê¸°ëŠ¥ ë¹„í™œì„±í™”</p>
</li>
<li>
<p>UFW ë£° ì„¤ì •</p>
<div class="ulist">
<ul>
<li>
<p><code>ufw default allow outgoing</code>: outbound ì „ì²´ í—ˆìš©</p>
</li>
<li>
<p><code>ufw default allow incoming</code>: incoming ì „ì²´ ê±°ë¶€</p>
</li>
<li>
<p><code>ufw allow from &lt;ip-addr&gt; port &lt;port-number&gt; proto &lt;protocol&gt; to &lt;ip-addr&gt; port &lt;port-number&gt; proto &lt;protocol&gt;</code></p>
<div class="ulist">
<ul>
<li>
<p>ex) <code>ufw allow from 172.16.238.5 to any port 22 proto tcp</code>: 172.16.238.5ì—ì„œ 22ë²ˆ tcp í¬íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ í—ˆìš©</p>
</li>
<li>
<p>ex) <code>ufw deny 8080</code>: 8080í¬íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ ê±°ë¶€</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ufw allow &lt;start-port-number&gt;:&lt;end-port-number&gt;/&lt;protocol&gt;</code>: í¬íŠ¸ ë²”ìœ„ë¡œ í—ˆìš©</p>
<div class="ulist">
<ul>
<li>
<p>ex) <code>ufw allow 1000:2000/tcp</code>: 1000~2000 ì‚¬ì´ í¬íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ í—ˆìš©</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>ufw delete &lt;line-number&gt;</code>: <code>ufw status numbered</code> ë¡œ ì¡°íšŒí–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” ë¼ì¸ ë„˜ë²„ë¡œ ë£° ì‚­ì œ</p>
</li>
</ul>
</div>
</li>
<li>
<p>ì‹œìŠ¤í…œ ì½œ ê´€ë¦¬ - SECCOMP</p>
<div class="ulist">
<ul>
<li>
<p>íŠ¹ì • í”„ë¡œì„¸ìŠ¤ë¥¼ straceë¡œ ì¶”ì í•˜ê¸°</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>pidof &lt;process-name&gt;</code>: check PID</p>
</li>
<li>
<p><code>strace -p &lt;pid&gt;</code>: ì´ í”„ë¡œì„¸ìŠ¤ì—ì„œ í˜¸ì¶œë˜ëŠ” ëª¨ë“  ì‹œìŠ¤í…œ ì½œ ì¶”ì </p>
</li>
</ol>
</div>
</li>
<li>
<p><code>strace -c &lt;command&gt;</code>: íŠ¹ì • ëª…ë ¹ straceë¡œ ì¶”ì í•˜ê¸°</p>
</li>
<li>
<p><code>grep -i seccomp /boot/config-$(uname-r)</code>: SECCOMPì„ ì§€ì›í•˜ëŠ”ì§€ ì—¬ë¶€(<code>CONFIG_SECCOMP=y</code>)</p>
</li>
<li>
<p>podì—ì„œ SECCOMP profile ì ìš©í•˜ê¸°</p>
<div class="ulist">
<ul>
<li>
<p><a href="#https://kubernetes.io/docs/tutorials/security/seccomp/">Restrict a Container&#8217;s Syscalls with seccomp</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: violation-pod
  labels:
    app: violation-pod
spec:
  securityContext:
    seccompProfile:
      type: Localhost
      localhostProfile: profiles/violation.json</code></pre>
</div>
</div>
</li>
<li>
<p><code>localhostProfile</code> ê²½ë¡œëŠ” default seccomp ë””ë ‰í† ë¦¬ì— ë”°ë¼ ìƒëŒ€ ê²½ë¡œ</p>
<div class="ulist">
<ul>
<li>
<p><code>/var/libe/kubelet/seccomp</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ì œí•œ - AppArmor</p>
<div class="ulist">
<ul>
<li>
<p><code>systectl status apparmor</code></p>
</li>
<li>
<p><code>aa-status</code>: ì»¤ë„ì— ë¡œë“œëœ apparmor profile ìƒíƒœ ì²´í¬</p>
</li>
<li>
<p><code>apparmor_parser &lt;profile_name&gt;</code>: profile ë¡œë“œ</p>
</li>
<li>
<p><code>/etc/apparmor.d</code>: default apparmor profile ë””ë ‰í† ë¦¬</p>
</li>
<li>
<p>podì— apparmor profile ì ìš©</p>
<div class="ulist">
<ul>
<li>
<p><a href="#https://kubernetes.io/docs/tutorials/security/apparmor/">Restrict a Container&#8217;s Access to Resources with AppArmor</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: violation-pod
  labels:
    app: violation-pod
  annotations:
    container.apparmor.security.beta.kubernetes.io/&lt;container_name&gt;: localhost/&lt;profile_name&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>podì˜ metadataì˜ annotations ë¶€ë¶„</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Admission Webhook Server - OPA</p>
<div class="ulist">
<ul>
<li>
<p>OPA ì„¤ì¹˜</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="http://github.com/open-policy-agent" class="bare">http://github.com/open-policy-agent</a> ì ‘ì† í›„ releaseì—ì„œ ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ</p>
</li>
<li>
<p><code>chmod +x opa</code></p>
</li>
<li>
<p><code>./opa run -s</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>OPA policy ë¡œë“œ</p>
<div class="ulist">
<ul>
<li>
<p><code>curl -X PUT --data-binary@&lt;file-name&gt; <a href="http://localhost:8181/v1/policies/&lt;policyname&gt" class="bare">http://localhost:8181/v1/policies/&lt;policyname&gt</a>;</code></p>
</li>
<li>
<p>kubernetesì—ì„œ OPA policyë¥¼ ë¡œë“œí•˜ê¸° ìœ„í•´ì„œëŠ” <code>rego file</code> ì„ <code>configmap</code> ìœ¼ë¡œ ë§Œë“¤ë©´ ëœë‹¤.</p>
<div class="ulist">
<ul>
<li>
<p><code>kubectl create configmap &lt;configmap-name&gt; --from-file=&lt;rego-file-path&gt;</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: ConfigMap
metadata:
  labels:
    openpolicyagent.org/policy: rego</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Container Sandbox - Gvisor/Kata</p>
<div class="ulist">
<ul>
<li>
<p>ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ìœ¼ë¡œ gVisor ì‚¬ìš©í•˜ê¸°</p>
<div class="ulist">
<ul>
<li>
<p><a href="#https://kubernetes.io/docs/concepts/containers/runtime-class/">Runtime Class</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: node.k8s.io/v1
kind: RuntimeClass
metadata:
  name: gvisor
handler: runsc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: mypod
spec:
  runtimeClassName: gvisor</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>íŠ¹ì • ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë§Œ ì‚¬ìš© ì •ì±… - ImagePolicyWebhook</p>
<div class="ulist">
<ul>
<li>
<p><a href="#https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/">Admission Controllers Reference</a></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>AdmissionConfiguration</code> ë¦¬ì†ŒìŠ¤ íŒŒì¼ ìƒì„±</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: apiserver.config.k8s.io/v1
kind: AdmissionConfiguration
plugins:
  - name: ImagePolicyWebhook
    configuration:
      imagePolicy:
        kubeConfigFile: &lt;path-to-kubeconfig-file-ì ˆëŒ€ê²½ë¡œ&gt;
        defaultAllow: true
        allowTTL: 50
        denyTTL: 50
        retryBackoff: 500</code></pre>
</div>
</div>
</li>
<li>
<p><code>kube-apiserver</code> ì˜µì…˜ ìˆ˜ì •</p>
<div class="listingblock">
<div class="title">/etc/kubernetes/manifest/kube-apiserver.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">--enable-admission-plugins=ImagePolicyWebhook
--admission-control-config-file=&lt;path-Admission-controller-resource-file&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>í•´ë‹¹ ê²½ë¡œê°€ <code>volume mount</code> ë˜ì–´ìˆì§€ ì•Šì„ ê²½ìš° ì¶”ê°€í•´ì•¼ ëœë‹¤.</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>ë¦¬ì†ŒìŠ¤ íŒŒì¼ ë¶„ì„ ë° ì·¨ì•½ì  ê²€ì‚¬ - kubesec</p>
<div class="ulist">
<ul>
<li>
<p><code>kubesec.io</code> ì ‘ì†í•´ì„œ ì„¤ì¹˜ binary ë‹¤ìš´</p>
</li>
<li>
<p><code>kubesec scan &lt;resource-path&gt;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>ì»¨í…Œì´ë„ˆë‚˜ artifactì˜ ì·¨ì•½ì  ê²€ì‚¬ - Trivy</p>
<div class="ulist">
<ul>
<li>
<p><code>github.com/aquasecurity/trivy</code> ì ‘ì†í•´ì„œ release ë‹¤ìš´ë¡œë“œ</p>
</li>
<li>
<p><code>trivy image &lt;image-name&gt; [--severity &lt;severity-level&gt; --format &lt;output-format&gt;</code></p>
</li>
<li>
<p><code>trivy image --input &lt;tar-file-name&gt;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>ì»¨í…Œì´ë„ˆì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ ê¸°ë¡ - Falco</p>
<div class="ulist">
<ul>
<li>
<p><code>falco.org</code>  ë˜ëŠ” <code>github.com/falcosecurity/charts</code> ì ‘ì†í•´ì„œ ì„¤ì¹˜</p>
</li>
<li>
<p><code>systemctl status falco</code>: falco ì„œë¹„ìŠ¤ ìƒíƒœ ë° ì„¤ì • íŒŒì¼ ê²½ë¡œ í™•ì¸</p>
</li>
<li>
<p><code>/etc/falco/falco.yaml</code>: ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜ ë° í˜•ì‹, ë£° íŒŒì¼ ê²½ë¡œ ë“± ì„¤ì •</p>
</li>
<li>
<p><code>/etc/falco/falco_rules.local.yaml</code>: ë£° ì¶”ê°€/ìˆ˜ì • ì‹œ ë³€ê²½</p>
</li>
<li>
<p><code>kill -1 $(cat/var/run/falco.pid)</code>: ì„œë¹„ìŠ¤ ë°ëª¬ ë¦¬ë¡œë“œ ì—†ì´ ë³€ê²½ì‚¬í•­ ë°˜ì˜ ê°€ëŠ¥</p>
</li>
<li>
<p><code>journalctl -fu falco</code>: falco ë¡œê·¸ í™•ì¸</p>
</li>
</ul>
</div>
</li>
<li>
<p>ë¶ˆë³€ ì»¨í…Œì´ë„ˆ í™•ì¸ - RootFileSystemì„ ì½ê¸° ì „ìš©ìœ¼ë¡œ</p>
<div class="ulist">
<ul>
<li>
<p><a href="#https://kubernetes.io/docs/tasks/configure-pod-container/security-context/">Configure a Security Context for a Pod or Container</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: mypod
spec:
  containers:
  - securityContext:
      readOnlyRootFilesystem: true
      privileged: false</code></pre>
</div>
</div>
</li>
<li>
<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¶”ê°€/ìˆ˜ì • í•´ì•¼í•˜ëŠ” ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê²½ë¡œê°€ ìˆë‹¤ë©´ <code>emptyDir: {}</code> ë¡œ <code>volumeMount</code> í•´ì£¼ë©´ ëœë‹¤.</p>
</li>
</ul>
</div>
</li>
<li>
<p>ì´ë²¤íŠ¸ ë¡œê·¸ ê¸°ë¡ ì„¤ì • - Auditing</p>
<div class="ulist">
<ul>
<li>
<p><a href="#https://kubernetes.io/docs/tasks/debug/debug-cluster/audit/">Audit</a></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Policy</code> ë¦¬ì†ŒìŠ¤ íŒŒì¼ ìƒì„±</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: audit.k8s.io/v1 # This is required.
kind: Policy
omitStages:
  - "RequestReceived"
rules:
  - level: RequestResponse
    resources:
    - group: ""
      resources: ["pods"]
      namespaces: ["myNamespace"]
      verbs: ["delete"] <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ìƒëµ ì‹œ ëª¨ë“  ë™ì‘ ëŒ€ìƒ</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>kube-apiserver</code> ì˜µì…˜ ìˆ˜ì •</p>
<div class="listingblock">
<div class="title">/etc/kubernetes/manifest/kube-apiserver.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">--audit-policy-file=/etc/kubernetes/audit-policy.yaml<i class="conum" data-value="1"></i><b>(1)</b>
--audit-log-path=/var/log/kubernetes/audit/audit.log</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>í•´ë‹¹ ê²½ë¡œê°€ <code>volume mount</code> ë˜ì–´ìˆì§€ ì•Šì„ ê²½ìš° ì¶”ê°€í•´ì•¼ ëœë‹¤.</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>kube-bench</p>
<div class="ulist">
<ul>
<li>
<p><code>kube-bench run --type=&lt;master|node&gt;</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright Â© <a href="https://opendevise.com">OpenDevise Inc.</a> and individual contributors to <a href="https://antora.org">Antora</a>. Site deploys by <a href="https://netlify.com">Netlify</a>.</p>
  <p>Except where otherwise noted, docs.antora.org, Antora, and the Antora UI, are licensed under the <a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License Version 2.0</a> (MPL-2.0).</p>
  <p>AsciiDocÂ® is a trademark of the Eclipse Foundation, Inc.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
